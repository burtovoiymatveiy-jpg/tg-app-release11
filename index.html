<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–∞–∫–∞–∑ —Ä–∞–±–æ—Ç—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #ffffff; --sec-bg: #f4f4f5; --text: #000000; --hint: #707579;
            --card-border: rgba(0,0,0,0.1); --accent: #3390ec; --accent-red: #ff3b30; --accent-green: #34c759;
        }
        [data-theme="dark"] {
            --bg: #1c1c1d; --sec-bg: #2c2c2e; --text: #ffffff; --hint: #8e8e93; --card-border: rgba(255,255,255,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg); color: var(--text); margin: 0; padding: 16px;
            display: flex; flex-direction: column; gap: 14px; transition: 0.3s;
        }

        /* Skeleton Loading */
        #skeleton { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 1000; padding: 16px; box-sizing: border-box; }
        .sk-card { background: var(--sec-bg); height: 100px; border-radius: 16px; margin-bottom: 15px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        /* Theme Toggle Animation */
        .theme-toggle {
            position: absolute; top: 12px; right: 16px; background: var(--sec-bg);
            border: 1px solid var(--card-border); border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .theme-toggle:active { transform: scale(0.8) rotate(180deg); }

        .card { background: var(--sec-bg); border-radius: 16px; padding: 16px; border: 1px solid var(--card-border); position: relative; }
        .error-border { border-color: var(--accent-red) !important; animation: shake 0.3s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        label { font-size: 10px; color: var(--hint); font-weight: 800; text-transform: uppercase; margin-bottom: 6px; display: block; }
        input, select, textarea {
            background: var(--bg); border: 1px solid var(--card-border); border-radius: 10px;
            color: var(--text); font-size: 16px; padding: 12px; width: 100%; box-sizing: border-box; outline: none;
        }

        /* Animated Receipt */
        .preview-box {
            background: var(--sec-bg); border: 1px dashed var(--hint); border-radius: 12px;
            padding: 14px; font-family: monospace; font-size: 13px; white-space: pre-line;
            overflow: hidden; transition: max-height 0.5s ease-in-out; max-height: 0; opacity: 0;
        }
        .preview-box.show { max-height: 500px; opacity: 1; margin-top: 10px; border: 1px solid var(--accent); }

        .main-btn { background: var(--accent); color: white; border: none; padding: 16px; border-radius: 14px; font-size: 16px; font-weight: 700; width: 100%; }
        .row { display: flex; gap: 10px; }
        .secondary-btn { background: var(--sec-bg); border: 1px solid var(--card-border); color: var(--accent); padding: 10px; border-radius: 12px; font-size: 13px; font-weight: 600; text-align: center; flex: 1; }
        
        .disclaimer { font-size: 11px; color: var(--hint); line-height: 1.4; text-align: center; }
        .urgent-tag { background: var(--accent-red); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; vertical-align: middle; }
        
        .stats-box { text-align: center; border-top: 1px solid var(--card-border); padding-top: 10px; margin-top: 5px; }
        .stats-num { color: var(--accent-green); font-weight: 800; font-size: 18px; }
    </style>
</head>
<body>

<div id="skeleton">
    <div class="sk-card" style="height: 40px; width: 60%;"></div>
    <div class="sk-card"></div>
    <div class="sk-card" style="height: 150px;"></div>
    <div class="sk-card"></div>
</div>

<div class="theme-toggle" onclick="toggleTheme()" id="theme-btn">‚òÄÔ∏è</div>

<div class="sub-warning" style="margin-right: 50px; background: rgba(255,152,0,0.1); border: 1px solid #ff9800; padding: 8px; border-radius: 10px; font-size: 11px; font-weight: 700; text-align: center;">
    ‚ö†Ô∏è –ü–æ–¥–ø–∏—Å–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞!
</div>

<div class="row">
    <div class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/txtandpptx')">üì¢ –ö–∞–Ω–∞–ª</div>
    <div class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/OTZblBblawarem')">‚≠ê –û—Ç–∑—ã–≤—ã</div>
</div>

<div class="card">
    <label>–í–∏–¥ —Ä–∞–±–æ—Ç—ã</label>
    <select id="type" onchange="update()">
        <option value="–†–µ—Ñ–µ—Ä–∞—Ç">üìù –†–µ—Ñ–µ—Ä–∞—Ç</option>
        <option value="–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è">üìä –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</option>
        <option value="–î–æ–∫–ª–∞–¥">üé§ –î–æ–∫–ª–∞–¥</option>
        <option value="–ü—Ä–æ–µ–∫—Ç">üí° –ü—Ä–æ–µ–∫—Ç</option>
        <option value="–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–µ–∫—Ü–∏—é">üñã –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–µ–∫—Ü–∏—é</option>
    </select>
    <div class="row" style="margin-top:10px">
        <div><label>–°—Ç—Ä/–°–ª–∞–π–¥—ã</label><input type="number" id="count" placeholder="0" oninput="update()"></div>
        <div><label>–î–∞—Ç–∞</label><input type="text" id="date" placeholder="–î–î.–ú–ú" oninput="update()"></div>
    </div>
</div>

<div class="card">
    <label>–û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏</label>
    <textarea id="details" rows="2" placeholder="–®—Ä–∏—Ñ—Ç, –ø–æ–∂–µ–ª–∞–Ω–∏—è..." oninput="update()"></textarea>
    <div style="margin-top:10px"><label>–°—É–º–º–∞ (‚ÇΩ)</label><input type="text" id="price" placeholder="500" oninput="update()"></div>
</div>

<div class="card" style="padding: 12px 16px;">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <span style="font-size: 14px; font-weight: 700;">üö® –°—Ä–æ—á–Ω–æ</span>
        <input type="checkbox" id="urgent" onchange="update()" style="width:20px; height:20px;">
    </div>
</div>

<div class="preview-box" id="preview"></div>

<button class="main-btn" onclick="copy()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—É</button>

<div class="row">
    <button class="secondary-btn" style="color:var(--accent-red)" onclick="clearAll()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
    <button class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/awarem')">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤</button>
</div>

<div class="stats-box">
    <div class="stats-num">800+</div>
    <div style="font-size:10px; color:var(--hint)">–î–æ–≤–æ–ª—å–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ</div>
</div>

<div class="disclaimer">
    üí≥ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 100%</b><br>
    ‚ö†Ô∏è –Ø –Ω–µ –Ω–µ—Å—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏–ª –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.<br>
    ‚úÖ –ù–∞–∂–∏–º–∞—è ¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å¬ª, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ç–∞–º, <b>–≥–¥–µ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∞–Ω—Ç–∏–ø–ª–∞–≥–∏–∞—Ç</b>.
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Skeleton
    setTimeout(() => document.getElementById('skeleton').style.display = 'none', 1500);

    function toggleTheme() {
        const isDark = document.body.getAttribute('data-theme') === 'dark';
        document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
        document.getElementById('theme-btn').innerText = isDark ? '‚òÄÔ∏è' : 'üåô';
    }

    if (tg.colorScheme === 'dark') {
        document.body.setAttribute('data-theme', 'dark');
        document.getElementById('theme-btn').innerText = 'üåô';
    }

    function update() {
        const type = document.getElementById('type').value;
        const count = document.getElementById('count').value;
        const date = document.getElementById('date').value;
        const price = document.getElementById('price').value;
        const details = document.getElementById('details').value || '–Ω–µ—Ç';
        const isUrgent = document.getElementById('urgent').checked;

        if (count && date && price) {
            document.getElementById('preview').classList.add('show');
        }

        let unit = type.includes("–ü—Ä–µ–∑") ? "—Å–ª–∞–π–¥–æ–≤" : (type.includes("–ü–µ—Ä–µ–ø–∏—Å") ? "–ª–∏—Å—Ç–æ–≤" : "—Å—Ç—Ä–∞–Ω–∏—Ü");
        let header = isUrgent ? 'üö® –°–†–û–ß–ù–´–ô –ó–ê–ö–ê–ó üö®\n' : '';
        
        const text = `${header}1. –í–∏–¥: ${type}
2. –ö–æ–ª-–≤–æ ${unit}: ${count}
3. –°—Ä–æ–∫: ${date}
4. –°—É–º–º–∞: ${price} —Ä—É–±.
5. –ü–ª–∞–Ω/–¢–∏—Ç—É–ª—å–Ω–∏–∫: (–ø—Ä–∏—à–ª—é)
6. –§–ò–û: (—É–∫–∞–∂—É –≤ —á–∞—Ç–µ)
7. –î–µ—Ç–∞–ª–∏: ${details}
---
‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∞–Ω—Ç–∏–ø–ª–∞–≥–∏–∞—Ç.`;

        document.getElementById('preview').innerText = text;
    }

    function copy() {
        const count = document.getElementById('count');
        const date = document.getElementById('date');
        const price = document.getElementById('price');

        if (!count.value || !date.value || !price.value) {
            [count, date, price].forEach(el => { if(!el.value) el.classList.add('error-border') });
            tg.showAlert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è!");
            setTimeout(() => { [count, date, price].forEach(el => el.classList.remove('error-border')) }, 2000);
            return;
        }

        navigator.clipboard.writeText(document.getElementById('preview').innerText);
        tg.HapticFeedback.notificationOccurred('success');
        tg.showAlert("–ê–Ω–∫–µ—Ç–∞ –≥–æ—Ç–æ–≤–∞! –û—Ç–ø—Ä–∞–≤–ª—è–π –≤ –õ–° @awarem");
        tg.openTelegramLink("https://t.me/awarem");
    }

    function clearAll() {
        if(confirm("–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∞–Ω–∫–µ—Ç—É?")) {
            document.querySelectorAll('input, textarea').forEach(el => el.value = '');
            document.getElementById('preview').classList.remove('show');
            tg.HapticFeedback.impactOccurred('medium');
        }
    }

    update();
</script>
</body>
</html>
